{% extends "layouts/base.njk" %}

{% block content %}
<h1>{{ category ? 'Edit category' : 'Create category' }}</h1>
<form method="post" action="{{ action }}">
  <label for="name">Name</label>
  <input type="text" id="name" name="name" value="{{ category.name if category else '' }}" required />

  <label for="description">Description</label>
  <textarea id="description" name="description">{{ category.description if category else '' }}</textarea>

  <label for="parentId">Parent category</label>
  <select id="parentId" name="parentId">
    <option value="">None</option>
    {% for existing in categories %}
      {% if not category or existing.id != category.id %}
        <option value="{{ existing.id }}" {% if category and category.parentId == existing.id %}selected{% endif %}>{{ existing.name }}</option>
      {% endif %}
    {% endfor %}
  </select>

  <button type="submit" class="button-primary">{{ category ? 'Save changes' : 'Create category' }}</button>
</form>
{% endblock %}
